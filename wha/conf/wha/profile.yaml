properties:
  log4j.configuration: file:conf/wha/log4j-wha.properties
  flywheel.logging.splunk.url: ${mandatory(env.FLYWHEEL_SPLUNK_URL, "Splunk URL cannot be null")}
  flywheel.logging.splunk.token: ${secret(mandatory(env.FLYWHEEL_SPLUNK_TOKEN, "Splunk token cannot be null"))}
  flywheel.logging.splunk.index: ${mandatory(env.FLYWHEEL_SPLUNK_INDEX, "Splunk index cannot be null")}
  flywheel.logging.splunk.source: ${mandatory(env.FLYWHEEL_SPLUNK_INDEX, "Splunk source cannot be null")}

launchers: 
- type: au.com.williamhill.flywheel.ConfigLauncher
  backplane:
    type: au.com.williamhill.flywheel.edge.backplane.kafka.KafkaBackplane
    backplaneConfig:
      kafka:
        type: au.com.williamhill.flywheel.edge.backplane.kafka.KafkaCluster
        clusterConfig:
          bootstrapServers: sitapzoo:2181
          #bootstrapServers: zookeepertempest.sit.williamhill.internal:2181
          prodAcks: all
          prodRetries: 0
          prodBatchSize: 16384
          prodLingerMillis: 1
          prodBufferMemory: 33554432
          consAutoCommit: true
          consAutoCommitIntervalMillis: 100
      topic: platform.push
      serializer: au.com.williamhill.flywheel.edge.backplane.kafka.ScramjetSerializer
      deserializer: au.com.williamhill.flywheel.edge.backplane.kafka.ScramjetDeserializer
      pollTimeoutMillis: 100
      ttlMillis: 300000
    clusterId: test
    brokerId: 0
  serverConfig:
    port: 8080
    path: /broker
    idleTimeoutMillis: 300000
    pingIntervalMillis: 60000
    scanIntervalMillis: 1000
    servlets:
    - path: /health/*
      name: health
      servletClass: au.com.williamhill.flywheel.health.HealthServlet  
    endpointConfig:
      highWaterMark: ${maxLong}
  pubAuthChain:
  subAuthChain:
  plugins:
  - type: au.com.williamhill.flywheel.edge.plugin.beacon.Beacon
    topic: time
    intervalMillis: 1000
    format: "yyyy-MM-dd'T'HH:mm:ssZ"
  - type: au.com.williamhill.flywheel.edge.plugin.toplog.TopicLogger
    excludeTopics: ['time']